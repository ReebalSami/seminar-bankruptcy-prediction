<!DOCTYPE html>
<html>
<head>
    <title>Bankruptcy Prediction - Comprehensive Multi-Dataset Report</title>
    <meta charset="UTF-8">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        h1 {
            color: #2c3e50;
            border-bottom: 4px solid #3498db;
            padding-bottom: 15px;
            text-align: center;
        }
        h2 {
            color: #34495e;
            margin-top: 40px;
            background: linear-gradient(to right, #3498db, #2980b9);
            color: white;
            padding: 15px;
            border-radius: 5px;
        }
        h3 {
            color: #2c3e50;
            margin-top: 25px;
            border-left: 4px solid #3498db;
            padding-left: 15px;
        }
        .section {
            background-color: white;
            padding: 25px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        .metric {
            display: inline-block;
            background-color: #ecf0f1;
            padding: 15px;
            margin: 10px;
            border-radius: 5px;
            min-width: 200px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .metric-label {
            font-weight: bold;
            color: #7f8c8d;
            font-size: 0.9em;
        }
        .metric-value {
            font-size: 1.8em;
            color: #2c3e50;
            margin-top: 5px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th {
            background-color: #3498db;
            color: white;
            padding: 12px;
            text-align: left;
        }
        td {
            padding: 10px;
            border-bottom: 1px solid #ecf0f1;
        }
        tr:hover {
            background-color: #f8f9fa;
        }
        img {
            max-width: 100%;
            height: auto;
            margin: 15px 0;
            border-radius: 5px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .dataset-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            margin: 5px;
        }
        .polish-badge { background-color: #3498db; color: white; }
        .american-badge { background-color: #e74c3c; color: white; }
        .taiwan-badge { background-color: #2ecc71; color: white; }
        .timestamp {
            text-align: center;
            color: #7f8c8d;
            margin: 20px 0;
        }
        .best-model {
            background-color: #f39c12;
            color: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            font-size: 1.3em;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <h1>üèÜ Bankruptcy Prediction - Comprehensive Multi-Dataset Analysis</h1>
    <p class="timestamp">Generated: 2025-11-06 09:09:53</p>
    
    <div class="section">
        <h2>üìä Executive Summary</h2>

    <div class="best-model">
        ü•á Best Overall Performance: Polish Dataset - CatBoost<br>
        ROC-AUC: 0.9812
    </div>
    
    <div class="metric">
        <div class="metric-label">Datasets Analyzed</div>
        <div class="metric-value">3</div>
    </div>
    <div class="metric">
        <div class="metric-label">Models Trained</div>
        <div class="metric-value">11</div>
    </div>
    <div class="metric">
        <div class="metric-label">Polish Avg AUC</div>
        <div class="metric-value">0.9651</div>
    </div>
    <div class="metric">
        <div class="metric-label">Taiwan Avg AUC</div>
        <div class="metric-value">0.9373</div>
    </div>
    <div class="metric">
        <div class="metric-label">American Avg AUC</div>
        <div class="metric-value">0.8471</div>
    </div>

    </div>

<div class="section">
    <h2>üåç Cross-Dataset Comparison</h2>
<h3>Dataset Characteristics</h3><table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>Dataset</th>
      <th>Source</th>
      <th>Companies</th>
      <th>Features</th>
      <th>Feature_Type</th>
      <th>Bankruptcy_Rate_%</th>
      <th>Bankruptcies</th>
      <th>Horizons</th>
      <th>Time_Period</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Polish</td>
      <td>UCI ML Repository</td>
      <td>43405</td>
      <td>64</td>
      <td>Financial Ratios</td>
      <td>4.817417</td>
      <td>2091</td>
      <td>5</td>
      <td>2000-2013</td>
    </tr>
    <tr>
      <td>American</td>
      <td>Kaggle (NYSE/NASDAQ)</td>
      <td>8971</td>
      <td>18</td>
      <td>Absolute Values</td>
      <td>6.634300</td>
      <td>5220</td>
      <td>1</td>
      <td>1999-2018</td>
    </tr>
    <tr>
      <td>Taiwan</td>
      <td>TEJ Database</td>
      <td>6819</td>
      <td>95</td>
      <td>Financial Ratios</td>
      <td>3.226280</td>
      <td>220</td>
      <td>1</td>
      <td>1999-2009</td>
    </tr>
  </tbody>
</table><h3>Best Model by Dataset</h3><table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>dataset</th>
      <th>model_name</th>
      <th>roc_auc</th>
      <th>pr_auc</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>American</td>
      <td>Random Forest</td>
      <td>0.8667</td>
      <td>0.4599</td>
    </tr>
    <tr>
      <td>Polish</td>
      <td>CatBoost</td>
      <td>0.9812</td>
      <td>0.8477</td>
    </tr>
    <tr>
      <td>Taiwan</td>
      <td>Random Forest</td>
      <td>0.9460</td>
      <td>0.4982</td>
    </tr>
  </tbody>
</table><h3>Visualizations</h3><div class="grid"><img src="script_outputs/09_cross_dataset_comparison/figures/dataset_characteristics.png"><img src="script_outputs/09_cross_dataset_comparison/figures/model_performance_comparison.png"><img src="script_outputs/09_cross_dataset_comparison/figures/performance_heatmap.png"><img src="script_outputs/09_cross_dataset_comparison/figures/comparison_table.png"></div></div>
<div class="section">
    <h2><span class="polish-badge">POLISH DATASET</span> Complete Analysis (UCI Repository)</h2>

    <h3>Dataset Overview</h3>
    <div class="metric">
        <div class="metric-label">Total Samples</div>
        <div class="metric-value">43,405</div>
    </div>
    <div class="metric">
        <div class="metric-label">Features</div>
        <div class="metric-value">66</div>
    </div>
    <div class="metric">
        <div class="metric-label">Horizons</div>
        <div class="metric-value">5</div>
    </div>
    <div class="metric">
        <div class="metric-label">Time Period</div>
        <div class="metric-value">2000-2013</div>
    </div>
<h3>Advanced Models Performance</h3><table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>model_name</th>
      <th>roc_auc</th>
      <th>pr_auc</th>
      <th>brier_score</th>
      <th>recall_1pct_fpr</th>
      <th>recall_5pct_fpr</th>
      <th>horizon</th>
      <th>timestamp</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>XGBoost</td>
      <td>0.9810</td>
      <td>0.8339</td>
      <td>0.0126</td>
      <td>0.7407</td>
      <td>0.8519</td>
      <td>1</td>
      <td>2025-11-05T11:14:34.813824</td>
    </tr>
    <tr>
      <td>LightGBM</td>
      <td>0.9782</td>
      <td>0.8322</td>
      <td>0.0125</td>
      <td>0.7407</td>
      <td>0.8333</td>
      <td>1</td>
      <td>2025-11-05T11:14:34.813841</td>
    </tr>
    <tr>
      <td>CatBoost</td>
      <td>0.9812</td>
      <td>0.8477</td>
      <td>0.0136</td>
      <td>0.7778</td>
      <td>0.8519</td>
      <td>1</td>
      <td>2025-11-05T11:14:34.813846</td>
    </tr>
  </tbody>
</table>
    <h3>Econometric Analysis</h3>
    <div class="metric">
        <div class="metric-label">High VIF Features</div>
        <div class="metric-value">17</div>
    </div>
    <div class="metric">
        <div class="metric-label">Top Protective Feature</div>
        <div class="metric-value" style="font-size: 1.2em;">Profit Margin</div>
    </div>
    <div class="metric">
        <div class="metric-label">Top SHAP Feature</div>
        <div class="metric-value" style="font-size: 1.2em;">Cash Ratio</div>
    </div>
<h3>Key Visualizations</h3><div class="grid"><div><h4>Cross-Horizon Robustness</h4><img src="script_outputs/07_robustness_analysis/figures/cross_horizon_heatmap.png"></div><div><h4>SHAP Feature Importance</h4><img src="script_outputs/08_econometric_analysis/figures/shap_importance.png"></div></div></div>
<div class="section">
    <h2><span class="american-badge">AMERICAN DATASET</span> NYSE & NASDAQ Companies</h2>

    <h3>Dataset Overview</h3>
    <div class="metric">
        <div class="metric-label">Total Samples</div>
        <div class="metric-value">78,682</div>
    </div>
    <div class="metric">
        <div class="metric-label">Companies</div>
        <div class="metric-value">8,971</div>
    </div>
    <div class="metric">
        <div class="metric-label">Features</div>
        <div class="metric-value">18</div>
    </div>
    <div class="metric">
        <div class="metric-label">Bankruptcy Rate</div>
        <div class="metric-value">6.63%</div>
    </div>
    <div class="metric">
        <div class="metric-label">Time Period</div>
        <div class="metric-value">1999-2018</div>
    </div>
<h3>Model Performance</h3><table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>model_name</th>
      <th>roc_auc</th>
      <th>pr_auc</th>
      <th>recall_1pct_fpr</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Logistic Regression</td>
      <td>0.8229</td>
      <td>0.2647</td>
      <td>0.2083</td>
    </tr>
    <tr>
      <td>Random Forest</td>
      <td>0.8667</td>
      <td>0.4599</td>
      <td>0.3333</td>
    </tr>
    <tr>
      <td>CatBoost</td>
      <td>0.8518</td>
      <td>0.4229</td>
      <td>0.3333</td>
    </tr>
  </tbody>
</table>
    <h3>Exploratory Analysis</h3>
    <div class="metric">
        <div class="metric-label">Significant Features</div>
        <div class="metric-value">14 / 18</div>
    </div>
    <div class="metric">
        <div class="metric-label">Top Discriminative</div>
        <div class="metric-value" style="font-size: 1.2em;">Market Value</div>
    </div>
    <div class="metric">
        <div class="metric-label">Top Correlated</div>
        <div class="metric-value" style="font-size: 1.2em;">Net Income</div>
    </div>
<h3>Visualizations</h3><div class="grid"><div><h4>Discriminative Features</h4><img src="script_outputs/american/figures/discriminative_features.png"></div><div><h4>ROC Curves</h4><img src="script_outputs/american/figures/roc_curves.png"></div><div><h4>Model Comparison</h4><img src="script_outputs/american/figures/model_comparison.png"></div></div></div>
<div class="section">
    <h2><span class="taiwan-badge">TAIWAN DATASET</span> Taiwan Economic Journal (TEJ)</h2>

    <h3>Dataset Overview</h3>
    <div class="metric">
        <div class="metric-label">Total Samples</div>
        <div class="metric-value">6,819</div>
    </div>
    <div class="metric">
        <div class="metric-label">Features</div>
        <div class="metric-value">95</div>
    </div>
    <div class="metric">
        <div class="metric-label">Bankruptcy Rate</div>
        <div class="metric-value">3.23%</div>
    </div>
    <div class="metric">
        <div class="metric-label">Bankruptcies</div>
        <div class="metric-value">220</div>
    </div>
    <div class="metric">
        <div class="metric-label">Time Period</div>
        <div class="metric-value">1999-2009</div>
    </div>
<h3>Model Performance</h3><table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>model_name</th>
      <th>roc_auc</th>
      <th>pr_auc</th>
      <th>recall_1pct_fpr</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Logistic Regression</td>
      <td>0.9230</td>
      <td>0.3348</td>
      <td>0.2045</td>
    </tr>
    <tr>
      <td>Random Forest</td>
      <td>0.9460</td>
      <td>0.4982</td>
      <td>0.3409</td>
    </tr>
    <tr>
      <td>CatBoost</td>
      <td>0.9430</td>
      <td>0.4441</td>
      <td>0.2727</td>
    </tr>
  </tbody>
</table>
    <h3>Exploratory Analysis</h3>
    <div class="metric">
        <div class="metric-label">Total Features</div>
        <div class="metric-value">95</div>
    </div>
    <div class="metric">
        <div class="metric-label">Top Correlated Feature</div>
        <div class="metric-value" style="font-size: 1.0em;">Net Income to Total Assets</div>
    </div>
    <div class="metric">
        <div class="metric-label">Correlation</div>
        <div class="metric-value">-0.3155</div>
    </div>
<h3>Visualizations</h3><div class="grid"><div><h4>Top Correlations</h4><img src="script_outputs/taiwan/figures/top_correlations.png"></div><div><h4>ROC Curves</h4><img src="script_outputs/taiwan/figures/roc_curves.png"></div><div><h4>Model Performance</h4><img src="script_outputs/taiwan/figures/model_comparison.png"></div></div></div>
<div class="section">
    <h2>üî¨ Econometric Rigor & Advanced Analyses</h2>
    <p>Comprehensive econometric diagnostics, panel data analysis, and advanced modeling techniques.</p>
</div>
<div class="section"><h3>10. Econometric Diagnostics & Remediation</h3><h4>Original Model Issues</h4><div class="metric"><div class="metric-label">Hosmer-Lemeshow</div><div class="metric-value">PASS</div></div><div class="metric"><div class="metric-label">Events Per Variable</div><div class="metric-value">3.44</div></div><div class="metric"><div class="metric-label">Condition Number</div><div class="metric-value">2.68e+17</div></div><h4>Best Remediation Solution</h4><div class="metric"><div class="metric-label">Approach</div><div class="metric-value">VIF Selection (VIF<10)</div></div><div class="metric"><div class="metric-label">AUC</div><div class="metric-value">0.7788</div></div><div class="metric"><div class="metric-label">EPV (Fixed)</div><div class="metric-value">5.71</div></div><h4>Diagnostic Visualizations</h4><div class="grid"><div><h5>Residual Diagnostics</h5><img src="script_outputs/10_econometric_diagnostics/figures/residual_diagnostics.png"></div><div><h5>Influential Observations</h5><img src="script_outputs/10_econometric_diagnostics/figures/influence_diagnostics.png"></div><div><h5>Remediation Comparison</h5><img src="script_outputs/10b_econometric_remediation/figures/remediation_comparison.png"></div></div></div><div class="section"><h3>11. Panel Data Analysis</h3><h4>Temporal Validation Results</h4><div class="metric"><div class="metric-label">Total Observations</div><div class="metric-value">43,405</div></div><div class="metric"><div class="metric-label">Horizons</div><div class="metric-value">5</div></div><div class="metric"><div class="metric-label">Temporal AUC</div><div class="metric-value">0.7807</div></div><div class="metric"><div class="metric-label">Clustered SE AUC</div><div class="metric-value">0.7619</div></div><h4>Visualizations</h4><div class="grid"><div><h5>Within vs Cross-Horizon</h5><img src="script_outputs/11_panel_data_analysis/figures/within_vs_cross_horizon.png"></div><div><h5>Bootstrap Distribution</h5><img src="script_outputs/11_panel_data_analysis/figures/clustered_bootstrap.png"></div><div><h5>Bankruptcy by Horizon</h5><img src="script_outputs/11_panel_data_analysis/figures/bankruptcy_by_horizon.png"></div></div></div><div class="section"><h3>12. Cross-Dataset Transfer Learning</h3><h4>Generalizability Across Economies</h4><p>Testing if bankruptcy models trained on one country generalize to others.</p><div class="metric"><div class="metric-label">Total Experiments</div><div class="metric-value">6</div></div><div class="metric"><div class="metric-label">Avg Transfer AUC</div><div class="metric-value">0.6416</div></div><div class="metric"><div class="metric-label">Avg Degradation</div><div class="metric-value">29.40%</div></div><div class="metric"><div class="metric-label">Best Transfer</div><div class="metric-value">American ‚Üí Taiwan</div></div><h4>Key Finding</h4><p>‚ö†Ô∏è Models show <strong>29.4% degradation</strong> when applied across countries - bankruptcy prediction is <strong>context-dependent</strong> and requires local calibration.</p><h4>Visualizations</h4><div class="grid"><div><h5>Transfer Learning Matrix</h5><img src="script_outputs/12_cross_dataset_transfer/figures/transfer_matrix.png"></div><div><h5>Transfer vs Baseline</h5><img src="script_outputs/12_cross_dataset_transfer/figures/transfer_vs_baseline.png"></div></div></div><div class="section"><h3>13. Time Series Analysis with Lagged Variables</h3><h4>Impact of Historical Data</h4><p>Testing whether past financial performance improves bankruptcy prediction.</p><table><tr><th>Model</th><th>Features</th><th>AUC</th><th>Improvement</th></tr><tr><td>Baseline - current year only</td><td>5</td><td>0.6479</td><td>-</td></tr><tr><td>Current + 1-year lag</td><td>10</td><td>0.6508</td><td>0.45%</td></tr><tr><td>Current + 2-year lags</td><td>15</td><td>0.6554</td><td>1.16%</td></tr><tr><td>All features + change deltas</td><td>25</td><td>0.6553</td><td>1.14%</td></tr></table><h4>Key Finding</h4><p>‚úÖ <strong>Change features (deltas)</strong> are most important (35%) - financial <strong>trends</strong> predict bankruptcy better than absolute values.</p><h4>Visualizations</h4><div class="grid"><div><h5>Model Comparison</h5><img src="script_outputs/13_time_series_lagged/figures/lagged_model_comparison.png"></div><div><h5>Temporal Feature Importance</h5><img src="script_outputs/13_time_series_lagged/figures/temporal_importance.png"></div><div><h5>Top Features</h5><img src="script_outputs/13_time_series_lagged/figures/top_temporal_features.png"></div></div></div>
<div class="section">
    <h2>üìö Project Information</h2>
    <p><strong>Analysis Date:</strong> November 2025</p>
    <p><strong>Framework:</strong> Python 3.13, scikit-learn, XGBoost, LightGBM, CatBoost</p>
    <p><strong>Datasets:</strong> Polish (UCI), American (Kaggle), Taiwan (TEJ)</p>
    <p><strong>Total Samples Analyzed:</strong> 327,926 (with multi-horizon)</p>
    <p><strong>Total Models Trained:</strong> 40+ (including remediation and transfer learning)</p>
    <p><strong>Best Performance:</strong> Polish CatBoost (0.9812 AUC)</p>
    <p><strong>Econometric Tests:</strong> ‚úÖ Hosmer-Lemeshow, VIF, EPV, Clustered SE, Transfer Learning</p>
    <p><strong>Advanced Analyses:</strong> ‚úÖ Panel data, Temporal lags, Cross-dataset validation</p>
</div>

</body>
</html>
